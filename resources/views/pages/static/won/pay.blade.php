@extends('themes.' . $theme . '.master')

@section('title', 'Page Title')

@section('content')
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="welcome">
                    <div class="page-name pull-left"><h3>Won? Now what to do</h3></div>
                </div>
            </div>
        </div>
    </div>
    <div class="container marg50">
        <div class="row">
            <div class="col-lg-12">
                <p class="about_text">First of all, we would like to congratulate you on your win</p>
            </div>
        </div>
        <div class="row marg50">
            <div class="col-lg-9">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="">
                            <div class="accordion">
                                <section id="one">
                                    <span class="active"> <a href="#one">Helpful Resources for Authors</a></span>
                                    <div style="display:block">
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut sapiente incidunt laboriosam accusamus fuga voluptatum iure nulla pariatur doloribus labore praesentium provident ipsa vitae ipsum quos sunt explicabo recusandae quis repellendus ducimus officia perferendis a ad illum eum minus voluptate odit non quidem reiciendis. Enim pariatur mollitia quae aliquam ipsam voluptas a numquam assumenda corporis fugiat adipisci optio quidem minima nesciunt quasi suscipit praesentium error voluptate magnam quia. Temporibus odio a accusantium adipisci ut possimus libero sint enim nam id eligendi nisi molestias dolorem. Inventore eius suscipit officia quisquam possimus quia cumque quidem atque impedit similique? Ea laudantium animi vero.</p>
                                    </div>
                                </section>
                                <section id="two">
                                    <span><a href="#two">How much money can I make?</a></span>
                                    <div>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut sapiente incidunt laboriosam accusamus fuga voluptatum iure nulla pariatur doloribus labore praesentium provident ipsa vitae ipsum quos sunt explicabo recusandae quis repellendus ducimus officia perferendis a ad illum eum minus voluptate odit non quidem reiciendis. Enim pariatur mollitia quae aliquam ipsam voluptas a numquam assumenda corporis fugiat adipisci optio quidem minima nesciunt quasi suscipit praesentium error voluptate magnam quia. Temporibus odio a accusantium adipisci ut possimus libero sint enim nam id eligendi nisi molestias dolorem. Inventore eius suscipit officia quisquam possimus quia cumque quidem atque impedit similique? Ea laudantium animi vero. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut sapiente incidunt laboriosam accusamus fuga voluptatum iure nulla pariatur doloribus labore praesentium provident ipsa vitae ipsum quos sunt explicabo recusandae quis repellendus ducimus officia perferendis a ad illum eum minus voluptate odit non quidem reiciendis. Enim pariatur mollitia quae aliquam ipsam voluptas a numquam assumenda corporis fugiat adipisci optio quidem minima nesciunt quasi suscipit praesentium error voluptate magnam quia. Temporibus odio a accusantium adipisci ut possimus libero sint enim nam id eligendi nisi molestias dolorem. Inventore eius suscipit officia quisquam possimus quia cumque quidem atque impedit similique? Ea laudantium animi vero.</p>
                                    </div>
                                </section>
                                <section id="three">
                                    <span><a href="#three">How do I become an author?</a></span>
                                    <div>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut sapiente incidunt laboriosam accusamus fuga voluptatum iure nulla pariatur doloribus labore praesentium provident ipsa vitae ipsum quos sunt explicabo recusandae quis repellendus ducimus officia perferendis a ad illum eum minus voluptate odit non quidem reiciendis. Enim pariatur mollitia quae aliquam ipsam voluptas a numquam assumenda corporis fugiat adipisci optio quidem minima nesciunt quasi suscipit praesentium error voluptate magnam quia. Temporibus odio a accusantium adipisci ut possimus libero sint enim nam id eligendi nisi molestias dolorem. Inventore eius suscipit officia quisquam possimus quia cumque quidem atque impedit similique? Ea laudantium animi vero.</p>
                                    </div>
                                </section>
                                <section id="four">
                                    <span><a href="#four">An Introduction to the Marketplaces for Authors</a></span>
                                    <div>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut sapiente incidunt laboriosam accusamus fuga voluptatum iure nulla pariatur doloribus labore praesentium provident ipsa vitae ipsum quos sunt explicabo recusandae quis repellendus ducimus officia perferendis a ad illum eum minus voluptate odit non quidem reiciendis. Enim pariatur mollitia quae aliquam ipsam voluptas a numquam assumenda corporis fugiat adipisci optio quidem minima nesciunt quasi suscipit praesentium error voluptate magnam quia. Temporibus odio a accusantium adipisci ut possimus libero sint enim nam id eligendi nisi molestias dolorem. Inventore eius suscipit officia quisquam possimus quia cumque quidem atque impedit similique? Ea laudantium animi vero.</p>
                                    </div>
                                </section>
                                <section id="five">
                                    <span><a href="#five">How does the Tuts+ Premium affiliate program work?</a></span>
                                    <div>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut sapiente incidunt laboriosam accusamus fuga voluptatum iure nulla pariatur doloribus labore praesentium provident ipsa vitae ipsum quos sunt explicabo recusandae quis repellendus ducimus officia perferendis a ad illum eum minus voluptate odit non quidem reiciendis. Enim pariatur mollitia quae aliquam ipsam voluptas a numquam assumenda corporis fugiat adipisci optio quidem minima nesciunt quasi suscipit praesentium error voluptate magnam quia. Temporibus odio a accusantium adipisci ut possimus libero sint enim nam id eligendi nisi molestias dolorem. Inventore eius suscipit officia quisquam possimus quia cumque quidem atque impedit similique? Ea laudantium animi vero.</p>
                                    </div>
                                </section>
                                <section id="six">
                                    <span><a href="#six">How do I pay for items on the Marketplaces?</a></span>
                                    <div>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut sapiente incidunt laboriosam accusamus fuga voluptatum iure nulla pariatur doloribus labore praesentium provident ipsa vitae ipsum quos sunt explicabo recusandae quis repellendus ducimus officia perferendis a ad illum eum minus voluptate odit non quidem reiciendis. Enim pariatur mollitia quae aliquam ipsam voluptas a numquam assumenda corporis fugiat adipisci optio quidem minima nesciunt quasi suscipit praesentium error voluptate magnam quia. Temporibus odio a accusantium adipisci ut possimus libero sint enim nam id eligendi nisi molestias dolorem. Inventore eius suscipit officia quisquam possimus quia cumque quidem atque impedit similique? Ea laudantium animi vero.</p>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="ask-question">
                    <span class="iconbox-mail"></span>Pay Now
                </div>

                <p class="marg25">
                    So you've had a win, great you can now pay by one of the following methods
                    <ul class="categories">
                        <li><a href="#">Online</a></li>
                        <li><a href="#">Telephone</a></li>
                        <li><a href="#">Bank Transfer</a></li>
                    </ul>
                </p>
                <form action="/won-what-now/process" method="POST" id="payment-form">
                    <input type="hidden" name="_token" value="{{ csrf_token() }}">

                    <div class="payment-errors alert alert-danger fade"></div>

                    <div class="row form-group">
                        <div class="col-md-6">
                            <label><span>First Name</span></label>
                            <input type="text" name="first-name" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label>Last Name</label>
                            <input type="text" name="last-name" class="form-control" required>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-md-12">
                            <label>Due Fee Â£</label>
                            <input type="text" name="fee" class="form-control" required placeholder="00.00"/>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-md-12">
                            <label>
                                <span>Card Number</span>
                            </label>
                            <input type="text" size="20" maxlength="20" class="form-control cc-number"
                                   data-stripe="number" placeholder="XXXX XXXX XXXX XXXX" required/>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-md-7">
                            <label>
                                Expiration (MM/YYYY)
                            </label>
                            <input type="text" class="form-control cc-expire" placeholder="MM / YYYY" required/>
                        </div>
                        <div class="col-md-5">
                            <label>
                                <span>
                                    CVC
                                    <a href="#" rel="tooltip" data-placment="top"
                                       title="CVC is located on the back of the card, it's a 3 to 4 digit number">
                                        <i class="fa fa-info-circle"></i>
                                    </a>
                                </span>
                            </label>
                            <input type="text" size="4" maxlength="4" class="form-control cc-cvc" data-stripe="cvc"
                                   required/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <button type="submit" class="btn btn-success">Submit Payment</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
    <script type="text/javascript" src="/assets/js/jquery.payment.js"></script>
    <script type="text/javascript">
        $(function () {
            Stripe.setPublishableKey('{{ config('services.stripe.key') }}');

            $('input.cc-number').payment('formatCardNumber');
            $('input.cc-expire').payment('formatCardExpiry');
            $('input.cc-cvc').payment('formatCardCVC');

            $('#payment-form').on('submit', function (e) {
                e.preventDefault();
                var $form = $(this);

                $('.payment-errors').removeClass('in');
                $form.find('.has-error').removeClass('has-error');

                if (!$.payment.validateCardNumber($('input.cc-number').val())) {
                    $('.cc-number').parent().addClass('has-error');
                    $('.payment-errors').text('Invalid Card Number').addClass('in');
                    return;
                }

                var expiry = $.payment.cardExpiryVal($('input.cc-expire').val());
                if (!$.payment.validateCardExpiry(expiry.month, expiry.year)) {
                    $('.cc-expire').parent().addClass('has-error');
                    $('.payment-errors').text('Invalid Expiration Number').addClass('in');
                    return;
                }

                if (!$.payment.validateCardCVC($('.cc-cvc').val(), $.payment.cardType($('.cc-number').val()))) {
                    $('.cc-cvc').parent().addClass('has-error');
                    $('.payment-errors').text('Invalid CVC').addClass('in');
                    return;
                }

                Stripe.card.createToken({
                    'number': $('.cc-number').val(),
                    'cvc': $('.cc-cvc').val(),
                    'exp_month': expiry.month,
                    'exp_year': expiry.year
                },stripeResponseHandler);

                $form.find('button').prop('disabled', true);
            });

            function stripeResponseHandler(status, response) {

                var $form = $('#payment-form');

                if (response.error) {
                    // Show the errors on the form
                    $form.find('.payment-errors').text(response.error.message).addClass('in');
                    $form.find('button').prop('disabled', false);
                } else {
                    // response contains id and card, which contains additional card details
                    var token = response.id;
                    // Insert the token into the form so it gets submitted to the server
                    $form.append($('<input type="hidden" name="stripeToken" />').val(token));
                    // and submit
                    $form.get(0).submit();

                }
            }
        });
    </script>
@stop